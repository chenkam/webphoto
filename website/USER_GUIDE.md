# 相册系统使用指南

## 功能概述

本系统是一个具有账号管理功能的3D相册系统，主要功能包括：

- ✅ **浏览相册**：无需登录，所有人可浏览3D全屏相册
- ✅ **账号登录**：使用账号登录系统
- ✅ **上传照片**：登录后可上传照片到相册
- ✅ **删除照片**：登录后可删除已上传的照片

## 默认账号

系统默认提供以下账号（在 `accounts.json` 文件中配置）：

- **用户名**：`cecilia`
- **密码**：`20210427`

## 使用流程

### 1. 启动系统

```bash
cd h:\website2\webphoto\website
python app.py
```

系统将在 `http://localhost:5000` 启动

### 2. 浏览相册（无需登录）

1. 访问 `http://localhost:5000`
2. 自动进入"3D画廊"页面
3. 可以：
   - 使用左右箭头按钮切换照片
   - 使用键盘方向键切换
   - 使用鼠标滚轮切换
   - 点击播放按钮自动轮播
   - 触屏设备可左右滑动

### 3. 账号登录

1. 点击导航栏的"🔐 登录"
2. 输入用户名和密码
3. 点击"登录"按钮
4. 登录成功后，导航栏会显示当前用户名和"登出"按钮

### 4. 上传照片（需要登录）

1. 确保已登录
2. 点击导航栏的"📤 上传照片"
3. 两种方式上传：
   - **拖拽上传**：直接将图片拖到上传区域
   - **点击上传**：点击"选择照片"按钮，从文件浏览器选择
4. 支持的格式：JPG, PNG, GIF, WEBP
5. 最大文件大小：16MB
6. 点击"上传到画廊"
7. 上传成功后自动跳转到画廊查看

### 5. 删除照片（需要登录）

1. 确保已登录
2. 在3D画廊页面，浏览到要删除的照片
3. 点击底部的"🗑️"按钮
4. 确认删除
5. 照片将被永久删除

### 6. 登出

1. 点击导航栏的"🚪 登出"
2. 确认登出
3. 返回未登录状态（仍可浏览相册）

## 权限说明

| 功能 | 未登录 | 已登录 |
|------|--------|--------|
| 浏览相册 | ✅ | ✅ |
| 上传照片 | ❌ | ✅ |
| 删除照片 | ❌ | ✅ |
| 自动播放 | ✅ | ✅ |
| 切换照片 | ✅ | ✅ |

## 账号管理

### 添加新账号

编辑 `accounts.json` 文件：

```json
[
  {
    "username": "cecilia",
    "password": "20210427"
  },
  {
    "username": "新用户名",
    "password": "新密码"
  }
]
```

保存后重启应用即可生效。

### 修改密码

在 `accounts.json` 文件中找到对应用户，修改 `password` 字段，保存后重启应用。

### 删除账号

在 `accounts.json` 文件中删除对应的用户对象，保存后重启应用。

## 技术特点

1. **会话管理**：使用Flask Session管理登录状态
2. **安全性**：上传和删除操作需要登录验证
3. **用户体验**：登录状态持久化，刷新页面不需要重新登录
4. **权限控制**：
   - 未登录时，上传页面显示"需要登录"提示
   - 未登录时，删除按钮自动隐藏
5. **实时反馈**：所有操作都有清晰的成功/失败提示

## 文件说明

- `accounts.json` - 账号配置文件
- `metadata.json` - 照片元数据
- `uploads/` - 照片存储目录
- `logs/` - 日志文件目录

## 常见问题

### Q: 为什么登录后还是不能上传？

A: 刷新页面（Ctrl+F5），清除浏览器缓存。

### Q: 忘记密码怎么办？

A: 直接修改 `accounts.json` 文件中的密码。

### Q: 可以多人同时使用吗？

A: 可以，每个浏览器会话独立维护登录状态。

### Q: 上传的照片保存在哪里？

A: 保存在 `uploads/` 目录中，元数据记录在 `metadata.json` 文件中。

## 安全建议

1. **修改默认密码**：部署到生产环境前，务必修改默认账号密码
2. **使用HTTPS**：生产环境建议配置SSL证书
3. **定期备份**：定期备份 `uploads/` 目录和 `metadata.json` 文件
4. **限制访问**：可配置nginx等反向代理，限制访问IP

## 日志查看

应用日志保存在 `logs/` 目录：

- `app.log` - 应用日志
- `error.log` - 错误日志

可以实时查看日志：

```bash
tail -f logs/app.log
```

## 更新记录

- 2025-12-26: 添加账号登录功能
- 之前版本: 基础相册功能
